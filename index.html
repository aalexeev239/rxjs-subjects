<!DOCTYPE html>
<html lang="en">
<head>
	<title>Shower Presentation Engine</title>
	<meta charset="utf-8">
	<meta http-equiv="x-ua-compatible" content="ie=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="stylesheet" href="node_modules/tinkoff-shower/theme/styles.css">
	<link rel="stylesheet" href="custom/styles.css">

	<link rel="icon" sizes="16x16" href="node_modules/tinkoff-shower/theme/images/favicon-16x16.png">
	<link rel="icon" sizes="32x32" href="node_modules/tinkoff-shower/theme/images/favicon-32x32.png">
	<link rel="icon" sizes="96x96" href="node_modules/tinkoff-shower/theme/images/favicon-96x96.png">
</head>
<body class="shower list">

<template id="timeline-template">
	<div class="timeline" style="width: 0px;"></div>
</template>

<header class="caption">
	<h1>RxJS Subjects</h1>
</header>

<section class="slide invert" id="cover">
	<img class="cover top" src="pictures/cover.jpg" alt="Hands on the orange typewriter in a park">
	<div class="cover-title">
		<h2>RxJS Subjects</h2>
	</div>
</section>

<section class="slide">
	<h2 class="slide-header">Observable</h2>
	<div class="slide-description">
		<p>Observable – наблюдаемая сущность, доставляет изменения подписчикам.</p>
	</div>
	<small>
		<pre>
				<code>const <mark>stream$</mark> = Rx.Observable.create((observer) => {</code>
				<code>    observer.next(1);</code>
				<code>    setTimeout(() => { observer.next(2);},    1000);</code>
				<code>    setTimeout(() => { observer.next(3);},    2000);</code>
				<code>    setTimeout(() => { observer.complete();}, 3000);</code>
				<code>});</code>
				<code>&nbsp;</code>
				<code>const subscribtion = <mark>stream$</mark>.subscribe({</code>
				<code>    next: (v) => logger.textContent += ' ' + v,</code>
				<code>    complete: () => logger.textContent += ' complete!'</code>
				<code>});</code>
		</pre>
	</small>
</section>

<section class="slide">
	<h2 class="slide-header">Observable</h2>
	<div class="slide-description">
		<p>Observer – наблюдатель. Функция создания определяет, как он будет получать значения.</p>
	</div>
	<small>
		<pre>
			<code>const stream$ = Rx.Observable.create((<mark>observer</mark>) => {</code>
			<code>    <mark>observer</mark>.next(1);</code>
			<code>    setTimeout(() => { <mark>observer</mark>.next(2);},    1000);</code>
			<code>    setTimeout(() => { <mark>observer</mark>.next(3);},    2000);</code>
			<code>    setTimeout(() => { <mark>observer</mark>.complete();}, 3000);</code>
				<code>});</code>
				<code>&nbsp;</code>
				<code>const subscribtion = stream$.subscribe({</code>
			<code>    <mark>next: (v) => logger.textContent += ' ' + v,</mark></code>
			<code>    <mark>complete: () => logger.textContent += ' complete!'</mark></code>
				<code>});</code>
		</pre>
	</small>
</section>

<section class="slide">
	<h2 class="slide-header">Observable</h2>
	<div class="slide-description">
		<p>Subscribtion – объект подписки.</p>
	</div>
	<small>
		<pre>
				<code>const stream$ = Rx.Observable.create((observer) => {</code>
				<code>    observer.next(1);</code>
				<code>    setTimeout(() => { observer.next(2);},    1000);</code>
				<code>    setTimeout(() => { observer.next(3);},    2000);</code>
				<code>    setTimeout(() => { observer.complete();}, 3000);</code>
				<code>});</code>
				<code>&nbsp;</code>
			<code>const <mark>subscribtion</mark> = <mark>stream$</mark>.subscribe({</code>
				<code>    next: (v) => logger.textContent += ' ' + v,</code>
				<code>    complete: () => logger.textContent += ' complete!'</code>
				<code>});</code>
		</pre>
	</small>
</section>

<section class="slide">
	<h2 class="slide-header">Observable</h2>
	<div class="slide-description">
		<div class="playground" id="step1"></div>
		<p class="logger" style="margin-top: 10px"></p>
		<button class="btn btn-play" onclick="run(step1, this)">▶</button>
	</div>
	<small>
		<pre>
				<code>const stream$ = Rx.Observable.create((observer) => {</code>
				<code>    observer.next(1);</code>
				<code>    setTimeout(() => { observer.next(2);},    1000);</code>
				<code>    setTimeout(() => { observer.next(3);},    2000);</code>
				<code>    setTimeout(() => { observer.complete();}, 3000);</code>
				<code>});</code>
				<code>&nbsp;</code>
				<code>const subscribtion = stream$.subscribe({</code>
				<code>    next: (v) => logger.textContent += ' ' + v,</code>
				<code>    complete: () => logger.textContent += ' complete!'</code>
				<code>});</code>
		</pre>
	</small>
	<script>
		function step1() {
			const playgroundElement = document.getElementById('step1');
			playgroundElement.innerHTML = '';

			const stream$ = Rx.Observable.create((observer) => {
				observer.next(1);
				setTimeout(() => {
					observer.next(2);
				}, 1000);
				setTimeout(() => {
					observer.next(3);
				}, 2000);
				setTimeout(() => {
					observer.complete()
				}, 3000);
			});

			startStream(playgroundElement, stream$);
			const logger = playgroundElement.parentNode.querySelector('.logger');
			logger.textContent = '';

			const subscribtion = stream$.subscribe({
				next: (v) => logger.textContent += ' ' + v,
				complete: () => logger.textContent += ' complete!'
			});
		}
	</script>
</section>

<section class="slide">
	<h2 class="slide-header">Observable</h2>
	<div class="slide-description big">
		<p>На каждую подписку создается отдельный поток значений</p>
		<div class="playground" id="step2_1"></div>
		<button class="btn btn-play" onclick="run(step2_1, this)">▶</button>
	</div>
	<small>
		<pre>
				<code>const stream$ = Rx.Observable.interval(500)</code>
				<code>    .take(5)</code>
				<code>    .map(() => Math.random().toString().substr(2, 3)); // 0.12345 => 123</code>
				<code>&nbsp;</code>
				<code>stream$.subscribe(/* ... */);</code>
				<code>stream$.subscribe(/* ... */);</code>
				<code>setTimeout(() => {</code>
				<code>    stream$.subscribe(/* ... */);</code>
				<code>}, 800);</code>
		</pre>
	</small>
	<script>
		function step2_1() {
			const playgroundElement = document.getElementById('step2_1');
			playgroundElement.innerHTML = '';

			const stream$ = Rx.Observable.interval(TICK_MS)
				.take(5)
				.map(() => Math.random().toString().substr(2, 3));

			startStream(playgroundElement, stream$);
			startStream(playgroundElement, stream$);
			startStream(playgroundElement, stream$, 800);
		}
	</script>
</section>

<section class="slide">
	<h2 class="slide-header">Observable</h2>
	<div class="slide-description big">
		<p>Однако есть Observable, распределяюшие события по всем подписчикам</p>
		<button class="btn hidden" id="click-button">Жмяк</button>
		<div class="playground" id="step3"></div>
		<button class="btn btn-play" onclick="run(step3, this)">▶</button>
	</div>
	<small>
		<pre>
				<code>const buttonElement = document.getElementById('click-button');</code>
				<code>const START = new Date();</code>
				<code>const stream$ = Rx.Observable.fromEvent(buttonElement, 'click')</code>
				<code>    .map(() => ((new Date() - START) / 1000).toFixed(2));</code>
				<code>&nbsp;</code>
				<code>stream$.subscribe(/* ... */);</code>
				<code>setTimeout(() => {stream$.subscribe(/* ... */);}, 1000);</code>
				<code>setTimeout(() => {stream$.subscribe(/* ... */);}, 2000);</code>
		</pre>
	</small>
	<script>
		function step3() {
			const playgroundElement = document.getElementById('step3');
			playgroundElement.innerHTML = '';

			const buttonElement = document.getElementById('click-button');
			buttonElement.classList.remove('hidden');

			const clickOnce = () => {
				START = new Date();

				const stream$ = Rx.Observable.fromEvent(buttonElement, 'click')
					.map(() => ((new Date() - START) / 1000).toFixed(2));

				startStream(playgroundElement, stream$);
				startStream(playgroundElement, stream$, 1000);
				startStream(playgroundElement, stream$, 2000);

				buttonElement.removeEventListener('click', clickOnce);
			};

			buttonElement.addEventListener('click', clickOnce)
		}
	</script>
</section>


<section class="slide">
	<h2 class="slide-header">Observable</h2>
	<div class="slide-description big">
		<p>Эти 2 типа Observable называются <strong class="text-cold">холодными</strong> и <strong class="text-hot">горячими</strong>.
		</p>
		<br>
		<p><strong class="text-cold">Холодные</strong> создают независимые потоки под каждую подписку.</p>
		<br>
		<p><strong class="text-hot">Горячие</strong> разделяют поток друг с другом</p>
	</div>
</section>

<section class="slide">
	<h2 class="slide-header">Observable</h2>
	<div class="slide-description">
		<p>Ну и что?</p>
		<p>Иногда надо <strong class="text-hot">подогреть</strong> <strong class="text-cold">холодный</strong>
			Observable. Например, чтобы не делать 2 запроса:</p>
	</div>
	<div class="relative-container">
		<small>
		<pre>
				<code>const request$ = this.http.get<any>('https://api.github.com/search/repositories?q=rxjs');</code>
				<code>&nbsp;</code>
				<code>request$</code>
				<code> .map(data => data.items.map(repo => repo.name))</code>
				<code> .subscribe(v => console.log(v));</code>
				<code>&nbsp;</code>
				<code>request$</code>
				<code> .map(data => data.items.filter(repo => repo.name === 'rxjs')[0])</code>
				<code> .map(repo => repo.score)</code>
				<code> .subscribe(v => console.log(v));</code>
</pre>
		</small>
	</div>
</section>

<section class="slide">
	<h2 class="slide-header">Observable</h2>
	<div class="slide-description">
		<p>Ну и что?</p>
		<p>Иногда надо <strong class="text-hot">подогреть</strong> <strong class="text-cold">холодный</strong>
			Observable. Например, чтобы не делать 2 запроса:</p>
	</div>
	<div class="relative-container">
		<small>
		<pre>
				<code>const request$ = this.http.get<any>('https://api.github.com/search/repositories?q=rxjs');</code>
				<code>&nbsp;</code>
				<code>request$</code>
				<code> .map(data => data.items.map(repo => repo.name))</code>
				<code> .subscribe(v => console.log(v));</code>
				<code>&nbsp;</code>
				<code>request$</code>
				<code> .map(data => data.items.filter(repo => repo.name === 'rxjs')[0])</code>
				<code> .map(repo => repo.score)</code>
				<code> .subscribe(v => console.log(v));</code>
		</pre>
		</small>
		<img class="relative-image" style="width: 380px; right: 0px; bottom: -60px;" src="pictures/2requests.png"
			 alt="2 requests">
	</div>
</section>

<section class="slide">
	<h2 class="shout">SUBJECT</h2>
</section>

<section class="slide">
	<h2 class="slide-header">Subject</h2>
	<div class="slide-description big">
		<p>Объединение Observable и Observer. Передает значение всем подписчикам</p>
		<div class="playground" id="step4"></div>
		<button class="btn btn-play" onclick="run(step4, this)">▶</button>
	</div>
	<div class="relative-container">
		<small>
		<pre>
				<code>const subject = new Rx.Subject();</code>
				<code>setSubjectTick(subject);</code>
				<code>&nbsp;</code>
				<code>subject.subscribe();</code>
				<code>setTimeout(() => subject.subscribe(/* ... */), 1000);</code>
				<code>setTimeout(() => subject.subscribe(/* ... */), 2000);</code>
		</pre>
		</small>
		<div class="code-special">
			<pre>
					<code>function setSubjectTick(subject) {</code>
					<code>    subject.next(0);</code>
					<code>    setTimeout(() => subject.next(1), 500);</code>
					<code>    setTimeout(() => subject.next(2), 1000);</code>
					<code>    setTimeout(() => subject.next(3), 1500);</code>
					<code>    setTimeout(() => subject.next(4), 2000);</code>
					<code>    setTimeout(() => subject.next(5), 2500);</code>
					<code>    setTimeout(() => subject.complete(), 3000);</code>
					<code>}</code>

			</pre>
		</div>
	</div>
	<script>
		function step4() {
			const playgroundElement = document.getElementById('step4');
			playgroundElement.innerHTML = '';

			const subject = new Rx.Subject();
			setSubjectTick1(subject);

			startStream(playgroundElement, subject);
			startStream(playgroundElement, subject, 1000);
			startStream(playgroundElement, subject, 2000);
		}
	</script>
</section>

<section class="slide">
	<h2 class="slide-header">Subject</h2>
	<div class="slide-description big">
		<p>Объединение
			<mark>Observable</mark>
			и Observer. Передает значение всем подписчикам
		</p>
	</div>
	<div class="relative-container">
		<small>
		<pre>
				<code>const subject = new Rx.Subject();</code>
				<code>setSubjectTick(subject);</code>
				<code>&nbsp;</code>
			<code>subject.<mark>subscribe();</mark></code>
			<code>setTimeout(() => subject.<mark>subscribe(/* ... */), 1000);</mark></code>
			<code>setTimeout(() => subject.<mark>subscribe(/* ... */), 2000);</mark></code>
		</pre>
		</small>
		<div class="code-special">
			<pre>
					<code>function setSubjectTick(subject) {</code>
					<code>    subject.next(0);</code>
					<code>    setTimeout(() => subject.next(1), 500);</code>
					<code>    setTimeout(() => subject.next(2), 1000);</code>
					<code>    setTimeout(() => subject.next(3), 1500);</code>
					<code>    setTimeout(() => subject.next(4), 2000);</code>
					<code>    setTimeout(() => subject.next(5), 2500);</code>
					<code>    setTimeout(() => subject.complete(), 3000);</code>
					<code>}</code>

			</pre>
		</div>
	</div>
</section>

<section class="slide">
	<h2 class="slide-header">Subject</h2>
	<div class="slide-description big">
		<p>Объединение
			Observable
			и
			<mark>Observer</mark>
			. Передает значение всем подписчикам
		</p>
	</div>
	<div class="relative-container">
		<small>
		<pre>
				<code>const subject = new Rx.Subject();</code>
				<code>setSubjectTick(subject);</code>
				<code>&nbsp;</code>
			<code>subject.subscribe();</code>
			<code>setTimeout(() => subject.subscribe(/* ... */), 1000);</code>
			<code>setTimeout(() => subject.subscribe(/* ... */), 2000);</code>
		</pre>
		</small>
		<div class="code-special">
			<pre>
					<code>function setSubjectTick(subject) {</code>
				<code>    subject.<mark>next(0)</mark>;</code>
				<code>    setTimeout(() => subject.<mark>next(1)</mark>, 500);</code>
				<code>    setTimeout(() => subject.<mark>next(2)</mark>, 1000);</code>
				<code>    setTimeout(() => subject.<mark>next(3)</mark>, 1500);</code>
				<code>    setTimeout(() => subject.<mark>next(4)</mark>, 2000);</code>
				<code>    setTimeout(() => subject.<mark>next(5)</mark>, 2500);</code>
					<code>    setTimeout(() => subject.complete(), 3000);</code>
					<code>}</code>

			</pre>
		</div>
	</div>
</section>

<!-- 214iou3245iouy398y53495p49u5piuo4yipu5y341pui5h41piu3h5yipu314y5pi143h5ipu31-->

<section class="slide">
	<h2 class="slide-header">Пример</h2>
	<div class="two-columns">
		<div class="playground" id="step1"></div>
		<div>
			<h2>Константин Констрантинопольский</h2>
			<p>Разработчик</p>
			<button class="btn" onclick="run(step1, this)">start</button>
		</div>

		<script>
			const playgroundElement = document.getElementById('step1');

			function step1() {
				playgroundElement.innerHTML = '';

				const stream$ = Rx.Observable.create((observer) => {
					observer.next(1);
					setTimeout(() => {
						observer.next(2);
					}, 1000);
					setTimeout(() => {
						observer.next(3);
					}, 2000);
					setTimeout(() => {
						observer.complete()
					}, 3000);
				});

				startStream(playgroundElement, stream$);

				// const subscribtion = stream$.subscribe({
				// 	next: (v) => logger.textContent += ' ' + v,
				// 	complete: () => logger.textContent += ' complete!'
				// });
			}
		</script>
	</div>
</section>


<section class="slide">
	<h2 class="slide-header">Об авторе</h2>
	<div class="two-columns">
		<div>
			<img src="pictures/author.jpg" width="100%" alt="">
		</div>
		<div>
			<h2>Константин Констрантинопольский</h2>
			<p>Разработчик</p>
		</div>
	</div>
</section>

<section class="slide">
	<h2 class="slide-header">Страница с заголовком</h2>
	<p class="note">
		Съешь ещё этих мягких французских булок, да выпей же чаю!
		<br>
		Это самая важная мысль на слайде, которую стоит подчеркнуть
	</p>
	<ol>
		<li>Built on HTML, CSS and vanilla JavaScript</li>
		<li>Works in all modern browsers</li>
		<li>Themes are separated from engine</li>
		<li>Modular and extensible</li>
		<li>Fully keyboard accessible</li>
		<li>Printable to PDF</li>
	</ol>
</section>

<section class="slide">
	<h2>С простым заголовком</h2>
	<p>Lorem ipsum dolor sit amet, consectetur <a href="#4">adipisicing</a> elit, sed do eiusmod tempor incididunt ut
		labore et dolore magna aliqua. Ut enim ad minim veniam, <em>quis nostrud</em> exercitation ullamco laboris
		<strong>nisi ut aliquip</strong> ex ea commodo consequat. Duis aute irure <i>dolor</i> in reprehenderit in
		voluptate velit esse cillum <b>dolore</b> eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non
		proident, sunt in <code>&lt;culpa&gt;</code> qui officia deserunt mollit anim id est laborum.</p>
</section>

<section class="slide">
	<h2>Заголовок 1</h2>
	<p>Текст текст текст текст текст текст текст текст текст текст</p>
	<h3>Заголовок 2</h3>
	<p>Текст текст текст текст текст текст текст текст текст текст</p>
	<h4>Заголовок 3</h4>
	<small>Текст текст текст текст текст текст текст текст текст текст</small>
</section>

<section class="slide">
	<h2 class="slide-header">Две колонки</h2>
	<p class="double">Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut
		labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut
		aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu
		fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia.</p>
</section>

<section class="slide">
	<h2 class="slide-header">Списки</h2>
	<ol>
		<li>Simple lists are marked with bullets</li>
		<li>Ordered lists begin with a number</li>
		<li>You can even nest lists one inside another
			<ul>
				<li>Or mix their types</li>
				<li>But do not go too far</li>
				<li>Otherwise audience will be bored</li>
			</ul>
		</li>
		<li>Look, seven rows exactly!</li>
	</ol>
</section>

<section class="slide">
	<h2 class="slide-header">Цитата</h2>
	<figure>
		<blockquote>
			<p>Как сказал кто-то из великих: «Будь осторожен: если чего-то сильно желаешь, это может случиться». Я бы
				перефразировал: если что-то хочешь, обязательно попробуй. Я снял трубку, позвонил Оливеру и предложил
				встретиться.</p>
		</blockquote>
		<figcaption>Олег Тиньков</figcaption>
	</figure>
</section>

<section class="slide">
	<h2 class="slide-header">Примеры кода</h2>
	<pre>
			<code>&lt;!DOCTYPE html&gt;</code>
			<code class="mark">&lt;html lang="en"&gt;</code>
			<code><mark>&lt;head&gt;</mark> <span class="comment">&lt;!--Comment--&gt;</span></code>
			<code>    &lt;title&gt;Shower&lt;/title&gt;</code>
			<code>    &lt;meta charset="<mark class="important">UTF-8</mark>"&gt;</code>
			<code>    &lt;link rel="stylesheet" href="screen.css"&gt;</code>
			<code><mark>&lt;/head&gt;</mark></code>
		</pre>
</section>

<section class="slide">
	<h2 class="slide-header">Больше кода</h2>
	<small>
			<pre>
				<code>&lt;!DOCTYPE html&gt;</code>
				<code class="mark">&lt;html lang="en"&gt;</code>
				<code><mark>&lt;head&gt;</mark> <span class="comment">&lt;!--Comment--&gt;</span></code>
				<code>    &lt;title&gt;Shower&lt;/title&gt;</code>
				<code>    &lt;meta charset="<mark class="important">UTF-8</mark>"&gt;</code>
				<code>    &lt;link rel="stylesheet" href="screen.css"&gt;</code>
				<code><mark>&lt;/head&gt;</mark></code>
				<code>&lt;body&gt;</code>
				<code>    &lt;div&gt;</code>
				<code>        Привет</code>
				<code>    &lt;/div&gt;</code>
				<code>&lt;/body&gt;</code>
			</pre>
	</small>
</section>

<section class="slide">
	<h2 class="slide-header">Even tables</h2>
	<table>
		<tr>
			<th scope="col">Locavore</th>
			<th>Umami</th>
			<th>Helvetica</th>
			<th>Vegan</th>
		</tr>
		<tr>
			<th scope="row">Fingerstache</th>
			<td>Kale</td>
			<td>Chips</td>
			<td>Keytar</td>
		</tr>
		<tr>
			<th scope="row">Sriracha</th>
			<td>Gluten-free</td>
			<td>Ennui</td>
			<td>Keffiyeh</td>
		</tr>
		<tr>
			<th scope="row">Thundercats</th>
			<td>Jean</td>
			<td>Shorts</td>
			<td>Biodiesel</td>
		</tr>
		<tr>
			<th scope="row">Terry</th>
			<td>Richardson</td>
			<td>Swag</td>
			<td>Blog</td>
		</tr>
	</table>
	<p>It’s good to have information organized.</p>
</section>

<section class="slide invert" id="picture">
	<h2 class="slide-header">Pictures</h2>
	<figure>
		<img class="cover" src="pictures/picture.jpg" alt="Orange typewriter on a wooden table close-up">
		<figcaption class="white">
			<a href="http://fiftyfootshadows.net/">© John Carey</a>
		</figcaption>
	</figure>
</section>

<section class="slide">
	<h2 class="shout">Дальше действовать будем мы</h2>
</section>

<section class="slide">
	<h2 class="slide-header">Inner navigation</h2>
	<ol>
		<li>Lets you reveal list items one by one</li>
		<li class="next">To keep some key points</li>
		<li class="next">In secret from audience</li>
		<li class="next">But it will work only once</li>
		<li class="next">Nobody wants to see the same joke twice</li>
	</ol>
</section>

<section class="slide grid">
	<h2 class="slide-header">All nicely aligned to grid</h2>
</section>

<section class="slide" id="see-more">
	<h2 class="shout">
		<img src="pictures/logo.svg" alt="Shower logo">
		<a href="https://github.com/shower/shower">See more on GitHub</a>
	</h2>
	<style>
		#see-more h2 {
			font-size: 100px
		}

		#see-more img {
			width: 0.72em;
			height: 0.72em;
		}
	</style>
</section>

<footer class="badge">
	<a href="https://github.com/shower/shower">Fork me on GitHub</a>
</footer>

<div class="progress"></div>

<script src="node_modules/shower-core/shower.min.js"></script>
<script src="node_modules/rxjs/bundles/Rx.min.js"></script>
<script src="custom/scripts.js"></script>
<!-- Copyright © 2018 Andrey Alexeev -->
</body>
</html>
